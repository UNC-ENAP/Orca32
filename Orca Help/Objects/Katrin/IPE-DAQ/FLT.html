<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="Adobe GoLive">		<title>Untitled Page</title>	</head>	<body bgcolor="#ffcccc" text="black">		<div align="center">			<h2>IPE-DAQ First level trigger card (FLT)</h2>		</div>		<div align="left">		    <p>The first level trigger is a FPGA based trigger card build at the Institute of Data 			   Processing and Electronics at Forschungszentrum Karlsruhe. 			   It has been used in the Auger and Katrin experiments.			</p>			<p>The FLT card icon looks like this in the configuration: 			  <img src="FLTCard.png" alt="FLT card icon"  align="middle">			<p>			   It can only be placed in the <a href="Crate.html">IPE-DAQ Crate</a> object.			</p>		    <p>  <img src="FLTDialog.png" alt="FLT card dialog" align="top" > </p>			<p>			   Each FLT card digitzes analog data in 22 channel with a sampling rate of 10Mhz.			   So the time bins have a length of 100ns.			   For each channel the gain can be adjusted individually 			   resulting in a factor 10 of amplification between lowest and highest gain settings.			   The trigger is optimzed for detecting steps in noisy signals. The filter length			   (denoise) can be changed from 1 to 128 x 100ns. For every channel there exisit 			   separate thresholds.			</p>			<p>    			   The FLT can be operated in three modes. 			   <ul>			     <li> The debug mode will record the ADC traces of the signal. 					      The length of the recorded ADC trace can be selected as multiples of 1024 					  time bins (one page). The maximal length of the ADC trace will be 64 					  pages = 6.5 ms. This mode does not allow a continuous measurement.					  After each trigger the data aquisition is stopped for readout.  				 <li> In run mode the height of the steps are estimated by the filter and stored				      in a ring buffer. This mode allows continuous measurement up the 					  some kHz of event rate.				 <li> During the measure mode the threshold is automatically increased 				      in order to estimate the energy distribution of the signal by hitrate 					  changes. This mode is intended for high rate. The maximal rate 					  is given only by the filter lenght.				      The sampling time of the hitrate calculation can be selected 					  between 1 and 8 seconds but for the high rates only 1 sec sampling 					  time should be used.                      The hitrate measurement is available in all three modes. While only in 					  the measurement mode the threshold is varied. 			  </ul>		  	  					     	  			</p>		       <h2>ADC Data Format</h2>									 <p>  Data format for energy </p>			<pre>xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx^^^^ ^^^^ ^^^^ ^^-----------------------data id                 ^^ ^^^^ ^^^^ ^^^^ ^^^^-length in longsxxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx^^^^ ^^^--------------------------------spare        ^ ^^^---------------------------crate             ^ ^^^^---------------------card                    ^^^^ ^^^^ ----------channelxxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx secxxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx subSecxxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx ^^^^ ^^^^------------------------------ channel (0..22)            ^^ ^^^^ ^^^^ ^^^^ ^^^^ ^^^^ channel Map (22bit, 1 bit set denoting the channel number)  xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx         ^ ^^^^ ^^^^-------------------- number of page in hardware buffer                           ^^ ^^^^ ^^^^ eventID (0..1024)xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx energy						</pre>			            <p> Data format for waveform</p>            <pre>xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx^^^^ ^^^^ ^^^^ ^^-----------------------data id                 ^^ ^^^^ ^^^^ ^^^^ ^^^^-length in longsxxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx^^^^ ^^^--------------------------------spare        ^ ^^^---------------------------crate             ^ ^^^^---------------------card                    ^^^^ ^^^^ ----------channelxxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx secxxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx subSecxxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx ^^^^ ^^^^------------------------------ channel (0..22)            ^^ ^^^^ ^^^^ ^^^^ ^^^^ ^^^^ channel Map (22bit, 1 bit set denoting the channel number)  xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx         ^ ^^^^ ^^^^-------------------- number of page in hardware buffer                           ^^ ^^^^ ^^^^ eventID (0..1024)xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx energyxxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx sec of restartxxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx subsec of restart followed by waveform data (n x 1024 16-bit words)			           </pre>				               <p> Data format for measure mode</p>            <pre>xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx^^^^ ^^^^ ^^^^ ^^-----------------------data id                 ^^ ^^^^ ^^^^ ^^^^ ^^^^-length in longsxxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx^^^^ ^^^--------------------------------spare        ^ ^^^---------------------------crate             ^ ^^^^---------------------card                    ^^^^ ^^^^ ----------channelxxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx ^^^^ ^^^^-------------------------------channel (0..22)            ^^ ^^^^ ^^^^ ^^^^ ^^^^ ^^^^ channel Map (22bit, 1 bit set denoting the channel number) xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx Thresholdxxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx Hitrate			</pre>			</div>	</body></html>